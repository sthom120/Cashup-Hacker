<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cash-up Hacker (AUD Float Helper)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- PWA MANIFEST -->
  <link rel="manifest" href="manifest.json" />

  <!-- ICONS -->
  <link rel="icon" href="icons/icon-192.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />

  <!-- THEME -->
  <meta name="theme-color" content="#6a1b9a" />

  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <main class="app">

    <!---------------------------------------------------------------
      HEADER
    ---------------------------------------------------------------->
    <header class="app-header">
      <h1>Cash-up Hacker</h1>
      <p class="subtitle">Your step-by-step cash-up helper</p>
    </header>

    <!---------------------------------------------------------------
      LEGEND / KEY
    ---------------------------------------------------------------->
    <section class="legend" aria-label="Legend for step icons">
      <h2 class="legend-title">How to read the steps</h2>

      <div class="legend-grid">
        <div class="legend-item">
          <span class="legend-emoji">ğŸŸ¥</span>
          <strong>Put into cash bag</strong><br>
          (to break notes / coins)
        </div>

        <div class="legend-item">
          <span class="legend-emoji">ğŸŸ©</span>
          <strong>Take out from cash bag</strong><br>
          (new change you get)
        </div>

        <div class="legend-item">
          <span class="legend-emoji">ğŸŸ¢</span>
          <strong>Add to float</strong><br>
          (these stay in the till)
        </div>

        <div class="legend-item">
          <span class="legend-emoji">ğŸŸ¦</span>
          <strong>Daily takings</strong><br>
          (go to banking)
        </div>

        <div class="legend-item">
          <span class="legend-emoji">âš ï¸</span>
          <strong>Warning</strong><br>
          (still short / needs fixing)
        </div>
      </div>
    </section>

    <!---------------------------------------------------------------
      STEP 1: FLOAT INPUT TABLE
    ---------------------------------------------------------------->
    <section class="float-section">
      <h2 class="section-title">1. Enter what's in the till right now</h2>

      <p class="section-help">
        Count each denomination in the till at the end of the day, then type the number into the matching box.
        The app will calculate your takings and guide you through the exact steps to fix the float.
      </p>

      <div class="table-wrapper">
        <table aria-label="Till count input table">
          <thead>
            <tr>
              <th>Denomination</th>
              <th>In till</th>
              <th>Target</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="denomRows">
            <!-- Rows generated by app.js -->
          </tbody>
        </table>
      </div>

      <button id="calculateBtn" class="primary-btn" type="button">
        ğŸ§® Show my steps
      </button>
    </section>

    <!---------------------------------------------------------------
      STEP 2: STEPS OUTPUT
    ---------------------------------------------------------------->
    <section class="steps" aria-label="Step-by-step instructions">

      <div class="steps-header">
        <h2>2. Follow the steps</h2>
        <p class="steps-hint">
          Start at Step&nbsp;1 and do each line in order.
          You can use Focus mode if you want to see one step at a time.
        </p>
      </div>

      <!-- NEW: STEP CONTROLS -->
      <div class="steps-controls" style="margin-bottom:0.6rem;">
        <label>
          <input type="checkbox" id="focusModeToggle">
          Focus mode (one step at a time)
        </label>

        <label style="margin-left:1rem;">
          <input type="checkbox" id="whyToggle">
          Show â€œwhyâ€
        </label>
      </div>

      <div id="stepsList">
        <!-- Steps generated by app.js -->
      </div>
    </section>

    <!---------------------------------------------------------------
      STEP 3: SUMMARY
    ---------------------------------------------------------------->
    <section class="summary" aria-label="Totals">
      <h2>3. Check totals</h2>

      <div id="summaryBox">
        <!-- Filled by app.js -->
      </div>
    </section>

    <!---------------------------------------------------------------
      STEP 4: TAKINGS DOUBLE-CHECK
    ---------------------------------------------------------------->
    <section class="double-check">
      <h2>4. Double-check your takings</h2>

      <p class="section-help">
        After following the steps, type how many of each note and coin you actually placed into daily takings
        (including extras removed and leftover coins from breaking notes).
        <br>This ensures the banking amount is accurate.
      </p>

      <div class="table-wrapper">
        <table aria-label="Takings verification table" class="takings-table">
          <thead>
            <tr>
              <th>Denomination</th>
              <th>Count in takings</th>
            </tr>
          </thead>
          <tbody id="takingsCheckRows">
            <!-- Generated by app.js -->
          </tbody>
        </table>
      </div>

      <button id="checkTakingsBtn" class="primary-btn">
        âœ” Check my takings match
      </button>

      <div id="takingsCheckResult" class="takings-result">
        <!-- Result text appears here -->
      </div>
    </section>

    <!---------------------------------------------------------------
      FINISHED + RESET
    ---------------------------------------------------------------->
    <button id="finishedBtn" class="finished-btn">
      Finished!
    </button>

    <button id="resetBtn" class="alt-btn" style="width:100%; margin-top:0.6rem;">
      Reset for next staff
    </button>

  </main>

  <!---------------------------------------------------------------
    RUNNER ANIMATION & SUCCESS MESSAGE
  ---------------------------------------------------------------->
  <div id="runnerContainer">
    <img id="runnerSprite" src="images/runner.png" alt="Runner going home">
  </div>

  <div id="successMessage">
    Float balanced! Time to go home ğŸ˜Š
  </div>

  <!---------------------------------------------------------------
    APP LOGIC
  ---------------------------------------------------------------->
  <script src="app.js"></script>

  <!-- SERVICE WORKER -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker
        .register("service-worker.js")
        .then(() => console.log("Service Worker registered"))
        .catch(err => console.log("SW registration failed:", err));
    }
  </script>

</body>
</html>
